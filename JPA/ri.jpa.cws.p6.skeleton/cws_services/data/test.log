/*C2*/SET SCHEMA PUBLIC
DISCONNECT
/*C3*/SET SCHEMA PUBLIC
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('b5530ab9-ab67-4e40-bd3b-3b43571068f5','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('44384d50-32a9-40cb-b70c-5be25e3d3a1c','Cash',0.0E0,1,'b5530ab9-ab67-4e40-bd3b-3b43571068f5')
INSERT INTO TMECHANICS VALUES('e3bcb3ea-57ac-40d7-9a24-e09f84dbdd4a','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('a090d86f-78cd-45ba-8b2b-6c0626a1752e',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('69fc3b20-d024-4c56-847a-4fca8a64e74c',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('d51d29b8-71f8-4d6b-9a02-70ada6d3f301','CreditCard',60.5E0,1,'b5530ab9-ab67-4e40-bd3b-3b43571068f5')
INSERT INTO TPAYMENTMEANS VALUES('e869c779-d46e-42fd-8186-dce174dee0aa','Voucher',0.0E0,1,'b5530ab9-ab67-4e40-bd3b-3b43571068f5')
INSERT INTO TCHARGES VALUES('8deba5d6-265e-4191-8e24-380be0db27b5',60.5E0,1,'69fc3b20-d024-4c56-847a-4fca8a64e74c','d51d29b8-71f8-4d6b-9a02-70ada6d3f301')
INSERT INTO TVEHICLES VALUES('8df9a029-8e6d-4a5f-8546-3d984231b551','seat','ibiza',1,'1234 GJI',1,'b5530ab9-ab67-4e40-bd3b-3b43571068f5','a090d86f-78cd-45ba-8b2b-6c0626a1752e')
INSERT INTO TWORKORDERS VALUES('0611d924-3634-4e66-800d-2f743a783ea1',50.0E0,'2019-10-31 10:42:56.898000','falla la junta la trocla','INVOICED',1,'69fc3b20-d024-4c56-847a-4fca8a64e74c',NULL,'8df9a029-8e6d-4a5f-8546-3d984231b551')
INSERT INTO TINTERVENTIONS VALUES('d5f093c4-17cb-45bc-8acb-997d68d56356','2019-10-31 10:42:56.898000',60,1,'e3bcb3ea-57ac-40d7-9a24-e09f84dbdd4a','0611d924-3634-4e66-800d-2f743a783ea1')
INSERT INTO TSPAREPARTS VALUES('0907f15f-0a82-47e7-849c-6140bf05777a','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('1229c443-28ad-48be-b98b-694894c0a7eb',2,1,'d5f093c4-17cb-45bc-8acb-997d68d56356','0907f15f-0a82-47e7-849c-6140bf05777a')
INSERT INTO TCASHES VALUES('44384d50-32a9-40cb-b70c-5be25e3d3a1c')
INSERT INTO TCREDITCARDS VALUES('d51d29b8-71f8-4d6b-9a02-70ada6d3f301','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('e869c779-d46e-42fd-8186-dce174dee0aa',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='1229c443-28ad-48be-b98b-694894c0a7eb'
DELETE FROM TSPAREPARTS WHERE ID='0907f15f-0a82-47e7-849c-6140bf05777a'
DELETE FROM TINTERVENTIONS WHERE ID='d5f093c4-17cb-45bc-8acb-997d68d56356'
DELETE FROM TWORKORDERS WHERE ID='0611d924-3634-4e66-800d-2f743a783ea1'
DELETE FROM TVEHICLES WHERE ID='8df9a029-8e6d-4a5f-8546-3d984231b551'
DELETE FROM TCHARGES WHERE ID='8deba5d6-265e-4191-8e24-380be0db27b5'
DELETE FROM TVOUCHERS WHERE ID='e869c779-d46e-42fd-8186-dce174dee0aa'
DELETE FROM TPAYMENTMEANS WHERE ID='e869c779-d46e-42fd-8186-dce174dee0aa'
DELETE FROM TCREDITCARDS WHERE ID='d51d29b8-71f8-4d6b-9a02-70ada6d3f301'
DELETE FROM TPAYMENTMEANS WHERE ID='d51d29b8-71f8-4d6b-9a02-70ada6d3f301'
DELETE FROM TINVOICES WHERE ID='69fc3b20-d024-4c56-847a-4fca8a64e74c'
DELETE FROM TVEHICLETYPES WHERE ID='a090d86f-78cd-45ba-8b2b-6c0626a1752e'
DELETE FROM TMECHANICS WHERE ID='e3bcb3ea-57ac-40d7-9a24-e09f84dbdd4a'
DELETE FROM TCASHES WHERE ID='44384d50-32a9-40cb-b70c-5be25e3d3a1c'
DELETE FROM TPAYMENTMEANS WHERE ID='44384d50-32a9-40cb-b70c-5be25e3d3a1c'
DELETE FROM TCLIENTS WHERE ID='b5530ab9-ab67-4e40-bd3b-3b43571068f5'
COMMIT
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('bffdc133-f733-4b89-a682-18f68bd5459b','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('72b996ac-d7a1-415b-a45e-1304363215f6','Cash',0.0E0,1,'bffdc133-f733-4b89-a682-18f68bd5459b')
INSERT INTO TMECHANICS VALUES('dc384004-07b7-4b46-8cfe-0d31cbf6ce3d','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('fc40e769-25a6-4b8c-adc4-4ff8842f54e5',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('7426da2f-88cd-47f7-829c-06240a033e8a',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('064548c1-4a64-408a-b37a-39dfcb61971a','CreditCard',60.5E0,1,'bffdc133-f733-4b89-a682-18f68bd5459b')
INSERT INTO TPAYMENTMEANS VALUES('df64e4bd-c785-420c-8755-eb1f51f071a5','Voucher',0.0E0,1,'bffdc133-f733-4b89-a682-18f68bd5459b')
INSERT INTO TCHARGES VALUES('cf8b99aa-35cf-4381-b085-452c8490b84c',60.5E0,1,'7426da2f-88cd-47f7-829c-06240a033e8a','064548c1-4a64-408a-b37a-39dfcb61971a')
INSERT INTO TVEHICLES VALUES('e105b585-dcdb-447b-96d3-323b5e6f6b77','seat','ibiza',1,'1234 GJI',1,'bffdc133-f733-4b89-a682-18f68bd5459b','fc40e769-25a6-4b8c-adc4-4ff8842f54e5')
INSERT INTO TWORKORDERS VALUES('fb49e65d-e936-443a-851a-650db94341ca',50.0E0,'2019-10-31 10:42:57.950000','falla la junta la trocla','INVOICED',1,'7426da2f-88cd-47f7-829c-06240a033e8a',NULL,'e105b585-dcdb-447b-96d3-323b5e6f6b77')
INSERT INTO TINTERVENTIONS VALUES('d8891537-a6d6-4eb4-84a3-e76c7c712cd6','2019-10-31 10:42:57.950000',60,1,'dc384004-07b7-4b46-8cfe-0d31cbf6ce3d','fb49e65d-e936-443a-851a-650db94341ca')
INSERT INTO TSPAREPARTS VALUES('896f63c9-04a8-451e-911f-34063b3f428c','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('a94bdbfe-1fb0-4fef-8a82-db1ed32b186e',2,1,'d8891537-a6d6-4eb4-84a3-e76c7c712cd6','896f63c9-04a8-451e-911f-34063b3f428c')
INSERT INTO TCASHES VALUES('72b996ac-d7a1-415b-a45e-1304363215f6')
INSERT INTO TCREDITCARDS VALUES('064548c1-4a64-408a-b37a-39dfcb61971a','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('df64e4bd-c785-420c-8755-eb1f51f071a5',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='a94bdbfe-1fb0-4fef-8a82-db1ed32b186e'
DELETE FROM TSPAREPARTS WHERE ID='896f63c9-04a8-451e-911f-34063b3f428c'
DELETE FROM TINTERVENTIONS WHERE ID='d8891537-a6d6-4eb4-84a3-e76c7c712cd6'
DELETE FROM TWORKORDERS WHERE ID='fb49e65d-e936-443a-851a-650db94341ca'
DELETE FROM TVEHICLES WHERE ID='e105b585-dcdb-447b-96d3-323b5e6f6b77'
DELETE FROM TCHARGES WHERE ID='cf8b99aa-35cf-4381-b085-452c8490b84c'
DELETE FROM TVOUCHERS WHERE ID='df64e4bd-c785-420c-8755-eb1f51f071a5'
DELETE FROM TPAYMENTMEANS WHERE ID='df64e4bd-c785-420c-8755-eb1f51f071a5'
DELETE FROM TCREDITCARDS WHERE ID='064548c1-4a64-408a-b37a-39dfcb61971a'
DELETE FROM TPAYMENTMEANS WHERE ID='064548c1-4a64-408a-b37a-39dfcb61971a'
DELETE FROM TINVOICES WHERE ID='7426da2f-88cd-47f7-829c-06240a033e8a'
DELETE FROM TVEHICLETYPES WHERE ID='fc40e769-25a6-4b8c-adc4-4ff8842f54e5'
DELETE FROM TMECHANICS WHERE ID='dc384004-07b7-4b46-8cfe-0d31cbf6ce3d'
DELETE FROM TCASHES WHERE ID='72b996ac-d7a1-415b-a45e-1304363215f6'
DELETE FROM TPAYMENTMEANS WHERE ID='72b996ac-d7a1-415b-a45e-1304363215f6'
DELETE FROM TCLIENTS WHERE ID='bffdc133-f733-4b89-a682-18f68bd5459b'
COMMIT
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('15781a5a-1133-4c53-a1c5-88d58e2e4a8c','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('b4ff6191-ef06-4ec1-ae31-29d01491883d','Cash',0.0E0,1,'15781a5a-1133-4c53-a1c5-88d58e2e4a8c')
INSERT INTO TMECHANICS VALUES('f6c72309-e4d5-46f7-96cb-8c9331dba2d2','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('1064039f-d788-49bb-bf2a-3646f0fb096b',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('e34d5073-492e-469c-b6bd-328eddd06af7',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('29b60212-8434-43bc-90ab-e868d8f2d52b','CreditCard',60.5E0,1,'15781a5a-1133-4c53-a1c5-88d58e2e4a8c')
INSERT INTO TPAYMENTMEANS VALUES('0284bb8e-3083-4292-803e-8757fc399413','Voucher',0.0E0,1,'15781a5a-1133-4c53-a1c5-88d58e2e4a8c')
INSERT INTO TCHARGES VALUES('1b0fd945-5108-48bb-a543-1427ecd0585a',60.5E0,1,'e34d5073-492e-469c-b6bd-328eddd06af7','29b60212-8434-43bc-90ab-e868d8f2d52b')
INSERT INTO TVEHICLES VALUES('e2fa56d2-9a65-48f5-bd4a-d0ebaa723cfc','seat','ibiza',1,'1234 GJI',1,'15781a5a-1133-4c53-a1c5-88d58e2e4a8c','1064039f-d788-49bb-bf2a-3646f0fb096b')
INSERT INTO TWORKORDERS VALUES('02d5a79c-069b-4143-8059-60029d030da2',50.0E0,'2019-10-31 10:42:58.380000','falla la junta la trocla','INVOICED',1,'e34d5073-492e-469c-b6bd-328eddd06af7',NULL,'e2fa56d2-9a65-48f5-bd4a-d0ebaa723cfc')
INSERT INTO TINTERVENTIONS VALUES('746ac171-0339-4396-bc51-cd4f4f96e4d9','2019-10-31 10:42:58.380000',60,1,'f6c72309-e4d5-46f7-96cb-8c9331dba2d2','02d5a79c-069b-4143-8059-60029d030da2')
INSERT INTO TSPAREPARTS VALUES('42efdeff-3d44-4213-b5eb-2733c79c6fa5','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('69341ada-f2eb-4ff0-b330-45afd55b56d8',2,1,'746ac171-0339-4396-bc51-cd4f4f96e4d9','42efdeff-3d44-4213-b5eb-2733c79c6fa5')
INSERT INTO TCASHES VALUES('b4ff6191-ef06-4ec1-ae31-29d01491883d')
INSERT INTO TCREDITCARDS VALUES('29b60212-8434-43bc-90ab-e868d8f2d52b','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('0284bb8e-3083-4292-803e-8757fc399413',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='69341ada-f2eb-4ff0-b330-45afd55b56d8'
DELETE FROM TSPAREPARTS WHERE ID='42efdeff-3d44-4213-b5eb-2733c79c6fa5'
DELETE FROM TINTERVENTIONS WHERE ID='746ac171-0339-4396-bc51-cd4f4f96e4d9'
DELETE FROM TWORKORDERS WHERE ID='02d5a79c-069b-4143-8059-60029d030da2'
DELETE FROM TVEHICLES WHERE ID='e2fa56d2-9a65-48f5-bd4a-d0ebaa723cfc'
DELETE FROM TCHARGES WHERE ID='1b0fd945-5108-48bb-a543-1427ecd0585a'
DELETE FROM TVOUCHERS WHERE ID='0284bb8e-3083-4292-803e-8757fc399413'
DELETE FROM TPAYMENTMEANS WHERE ID='0284bb8e-3083-4292-803e-8757fc399413'
DELETE FROM TCREDITCARDS WHERE ID='29b60212-8434-43bc-90ab-e868d8f2d52b'
DELETE FROM TPAYMENTMEANS WHERE ID='29b60212-8434-43bc-90ab-e868d8f2d52b'
DELETE FROM TINVOICES WHERE ID='e34d5073-492e-469c-b6bd-328eddd06af7'
DELETE FROM TVEHICLETYPES WHERE ID='1064039f-d788-49bb-bf2a-3646f0fb096b'
DELETE FROM TMECHANICS WHERE ID='f6c72309-e4d5-46f7-96cb-8c9331dba2d2'
DELETE FROM TCASHES WHERE ID='b4ff6191-ef06-4ec1-ae31-29d01491883d'
DELETE FROM TPAYMENTMEANS WHERE ID='b4ff6191-ef06-4ec1-ae31-29d01491883d'
DELETE FROM TCLIENTS WHERE ID='15781a5a-1133-4c53-a1c5-88d58e2e4a8c'
COMMIT
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('7fe46207-6577-4ce9-a46e-ef84cad8e33c','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('57f2b97e-8b53-44f1-a678-06bca3233ea7','Cash',0.0E0,1,'7fe46207-6577-4ce9-a46e-ef84cad8e33c')
INSERT INTO TMECHANICS VALUES('47cbd953-69c3-4b24-8af4-0dff95585a7e','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('2b2f5bcb-0369-4e15-9ff6-8bb46a648be9',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('3c61a7fc-db1d-46da-9ce2-24289392e138',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('e467c758-c80e-4b90-85f7-b90cc5965856','CreditCard',60.5E0,1,'7fe46207-6577-4ce9-a46e-ef84cad8e33c')
INSERT INTO TPAYMENTMEANS VALUES('27f6cc82-7a4a-41aa-8beb-e59c2c942221','Voucher',0.0E0,1,'7fe46207-6577-4ce9-a46e-ef84cad8e33c')
INSERT INTO TCHARGES VALUES('6010d463-6c48-4a79-b9e5-7a36d66dbd5a',60.5E0,1,'3c61a7fc-db1d-46da-9ce2-24289392e138','e467c758-c80e-4b90-85f7-b90cc5965856')
INSERT INTO TVEHICLES VALUES('a1034da6-1105-4944-a064-4ac0d0d2da24','seat','ibiza',1,'1234 GJI',1,'7fe46207-6577-4ce9-a46e-ef84cad8e33c','2b2f5bcb-0369-4e15-9ff6-8bb46a648be9')
INSERT INTO TWORKORDERS VALUES('8f986ca2-9606-4e3c-85ef-0109280b4a2e',50.0E0,'2019-10-31 10:42:58.796000','falla la junta la trocla','INVOICED',1,'3c61a7fc-db1d-46da-9ce2-24289392e138',NULL,'a1034da6-1105-4944-a064-4ac0d0d2da24')
INSERT INTO TINTERVENTIONS VALUES('15b0f55e-92b3-44ed-9a09-3f6e1d179565','2019-10-31 10:42:58.796000',60,1,'47cbd953-69c3-4b24-8af4-0dff95585a7e','8f986ca2-9606-4e3c-85ef-0109280b4a2e')
INSERT INTO TSPAREPARTS VALUES('4e08b5c0-94ce-4627-8c0b-c141996a7ae2','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('37189de6-bcf6-40a4-aa67-3e7dc19421ad',2,1,'15b0f55e-92b3-44ed-9a09-3f6e1d179565','4e08b5c0-94ce-4627-8c0b-c141996a7ae2')
INSERT INTO TCASHES VALUES('57f2b97e-8b53-44f1-a678-06bca3233ea7')
INSERT INTO TCREDITCARDS VALUES('e467c758-c80e-4b90-85f7-b90cc5965856','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('27f6cc82-7a4a-41aa-8beb-e59c2c942221',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='37189de6-bcf6-40a4-aa67-3e7dc19421ad'
DELETE FROM TSPAREPARTS WHERE ID='4e08b5c0-94ce-4627-8c0b-c141996a7ae2'
DELETE FROM TINTERVENTIONS WHERE ID='15b0f55e-92b3-44ed-9a09-3f6e1d179565'
DELETE FROM TWORKORDERS WHERE ID='8f986ca2-9606-4e3c-85ef-0109280b4a2e'
DELETE FROM TVEHICLES WHERE ID='a1034da6-1105-4944-a064-4ac0d0d2da24'
DELETE FROM TCHARGES WHERE ID='6010d463-6c48-4a79-b9e5-7a36d66dbd5a'
DELETE FROM TVOUCHERS WHERE ID='27f6cc82-7a4a-41aa-8beb-e59c2c942221'
DELETE FROM TPAYMENTMEANS WHERE ID='27f6cc82-7a4a-41aa-8beb-e59c2c942221'
DELETE FROM TCREDITCARDS WHERE ID='e467c758-c80e-4b90-85f7-b90cc5965856'
DELETE FROM TPAYMENTMEANS WHERE ID='e467c758-c80e-4b90-85f7-b90cc5965856'
DELETE FROM TINVOICES WHERE ID='3c61a7fc-db1d-46da-9ce2-24289392e138'
DELETE FROM TVEHICLETYPES WHERE ID='2b2f5bcb-0369-4e15-9ff6-8bb46a648be9'
DELETE FROM TMECHANICS WHERE ID='47cbd953-69c3-4b24-8af4-0dff95585a7e'
DELETE FROM TCASHES WHERE ID='57f2b97e-8b53-44f1-a678-06bca3233ea7'
DELETE FROM TPAYMENTMEANS WHERE ID='57f2b97e-8b53-44f1-a678-06bca3233ea7'
DELETE FROM TCLIENTS WHERE ID='7fe46207-6577-4ce9-a46e-ef84cad8e33c'
COMMIT
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('ccfa0dd8-0365-4175-9d3c-2692aa0b464f','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('6eed4675-3a20-49f0-ad5a-ab10d7196b77','Cash',0.0E0,1,'ccfa0dd8-0365-4175-9d3c-2692aa0b464f')
INSERT INTO TMECHANICS VALUES('8444c7a5-5db0-4cff-8c31-52a5b8763024','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('42c07221-1eec-49f9-9899-e95e10cc1dc1',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('28667fcc-d586-4fd7-9550-e2a064c4a0ee',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('38103aa0-c7d8-4843-9669-56c1415dc9c6','CreditCard',60.5E0,1,'ccfa0dd8-0365-4175-9d3c-2692aa0b464f')
INSERT INTO TPAYMENTMEANS VALUES('883b75b3-4099-4304-a5ee-94d5fcaa1f69','Voucher',0.0E0,1,'ccfa0dd8-0365-4175-9d3c-2692aa0b464f')
INSERT INTO TCHARGES VALUES('4080a7b0-ecc1-4205-8b70-151300c4b877',60.5E0,1,'28667fcc-d586-4fd7-9550-e2a064c4a0ee','38103aa0-c7d8-4843-9669-56c1415dc9c6')
INSERT INTO TVEHICLES VALUES('8a8e634d-16a4-4e6b-bba4-8fa2dfe65344','seat','ibiza',1,'1234 GJI',1,'ccfa0dd8-0365-4175-9d3c-2692aa0b464f','42c07221-1eec-49f9-9899-e95e10cc1dc1')
INSERT INTO TWORKORDERS VALUES('ff8155ba-d8ba-484d-a539-0d505bf313d8',50.0E0,'2019-10-31 10:42:59.173000','falla la junta la trocla','INVOICED',1,'28667fcc-d586-4fd7-9550-e2a064c4a0ee',NULL,'8a8e634d-16a4-4e6b-bba4-8fa2dfe65344')
INSERT INTO TINTERVENTIONS VALUES('7eb74309-1e86-4012-a104-b5963c88a6ed','2019-10-31 10:42:59.173000',60,1,'8444c7a5-5db0-4cff-8c31-52a5b8763024','ff8155ba-d8ba-484d-a539-0d505bf313d8')
INSERT INTO TSPAREPARTS VALUES('d68a5c87-ce75-46ff-aaf4-9158da7ef51a','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('41daf66d-9763-4a79-a620-2e5912cca4e9',2,1,'7eb74309-1e86-4012-a104-b5963c88a6ed','d68a5c87-ce75-46ff-aaf4-9158da7ef51a')
INSERT INTO TCASHES VALUES('6eed4675-3a20-49f0-ad5a-ab10d7196b77')
INSERT INTO TCREDITCARDS VALUES('38103aa0-c7d8-4843-9669-56c1415dc9c6','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('883b75b3-4099-4304-a5ee-94d5fcaa1f69',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='41daf66d-9763-4a79-a620-2e5912cca4e9'
DELETE FROM TSPAREPARTS WHERE ID='d68a5c87-ce75-46ff-aaf4-9158da7ef51a'
DELETE FROM TINTERVENTIONS WHERE ID='7eb74309-1e86-4012-a104-b5963c88a6ed'
DELETE FROM TWORKORDERS WHERE ID='ff8155ba-d8ba-484d-a539-0d505bf313d8'
DELETE FROM TVEHICLES WHERE ID='8a8e634d-16a4-4e6b-bba4-8fa2dfe65344'
DELETE FROM TCHARGES WHERE ID='4080a7b0-ecc1-4205-8b70-151300c4b877'
DELETE FROM TVOUCHERS WHERE ID='883b75b3-4099-4304-a5ee-94d5fcaa1f69'
DELETE FROM TPAYMENTMEANS WHERE ID='883b75b3-4099-4304-a5ee-94d5fcaa1f69'
DELETE FROM TCREDITCARDS WHERE ID='38103aa0-c7d8-4843-9669-56c1415dc9c6'
DELETE FROM TPAYMENTMEANS WHERE ID='38103aa0-c7d8-4843-9669-56c1415dc9c6'
DELETE FROM TINVOICES WHERE ID='28667fcc-d586-4fd7-9550-e2a064c4a0ee'
DELETE FROM TVEHICLETYPES WHERE ID='42c07221-1eec-49f9-9899-e95e10cc1dc1'
DELETE FROM TMECHANICS WHERE ID='8444c7a5-5db0-4cff-8c31-52a5b8763024'
DELETE FROM TCASHES WHERE ID='6eed4675-3a20-49f0-ad5a-ab10d7196b77'
DELETE FROM TPAYMENTMEANS WHERE ID='6eed4675-3a20-49f0-ad5a-ab10d7196b77'
DELETE FROM TCLIENTS WHERE ID='ccfa0dd8-0365-4175-9d3c-2692aa0b464f'
COMMIT
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('368612ed-5258-446a-a38a-8730cc5a2143','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('acecf701-511a-431c-bbb4-de01c84364d3','Cash',0.0E0,1,'368612ed-5258-446a-a38a-8730cc5a2143')
INSERT INTO TMECHANICS VALUES('a956da80-8323-4c92-a98e-350df137105f','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('2226c4b4-d12d-4b25-8e0f-703abd207522',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('149f7d65-4d00-4790-b113-a3f4486ce63b',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('ba24a3b3-6c4a-43b8-8b0d-82cb8726eea2','CreditCard',60.5E0,1,'368612ed-5258-446a-a38a-8730cc5a2143')
INSERT INTO TPAYMENTMEANS VALUES('a49c01c6-872f-4be6-a2c4-94fb6ca18165','Voucher',0.0E0,1,'368612ed-5258-446a-a38a-8730cc5a2143')
INSERT INTO TCHARGES VALUES('986dcb8e-2672-48c6-9259-b219890f77bb',60.5E0,1,'149f7d65-4d00-4790-b113-a3f4486ce63b','ba24a3b3-6c4a-43b8-8b0d-82cb8726eea2')
INSERT INTO TVEHICLES VALUES('dc2b05d2-be83-40e0-9ce3-17a601fa3b3b','seat','ibiza',1,'1234 GJI',1,'368612ed-5258-446a-a38a-8730cc5a2143','2226c4b4-d12d-4b25-8e0f-703abd207522')
INSERT INTO TWORKORDERS VALUES('a11face2-d945-4a4f-ab83-7a5a5099acea',50.0E0,'2019-10-31 10:42:59.574000','falla la junta la trocla','INVOICED',1,'149f7d65-4d00-4790-b113-a3f4486ce63b',NULL,'dc2b05d2-be83-40e0-9ce3-17a601fa3b3b')
INSERT INTO TINTERVENTIONS VALUES('d0308961-170f-42a2-8b3c-efad6ac7c568','2019-10-31 10:42:59.574000',60,1,'a956da80-8323-4c92-a98e-350df137105f','a11face2-d945-4a4f-ab83-7a5a5099acea')
INSERT INTO TSPAREPARTS VALUES('dc6e77c9-1aae-4755-8838-d7ead3311078','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('f14165ee-e9da-4884-82fd-1a039637faf5',2,1,'d0308961-170f-42a2-8b3c-efad6ac7c568','dc6e77c9-1aae-4755-8838-d7ead3311078')
INSERT INTO TCASHES VALUES('acecf701-511a-431c-bbb4-de01c84364d3')
INSERT INTO TCREDITCARDS VALUES('ba24a3b3-6c4a-43b8-8b0d-82cb8726eea2','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('a49c01c6-872f-4be6-a2c4-94fb6ca18165',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='f14165ee-e9da-4884-82fd-1a039637faf5'
DELETE FROM TSPAREPARTS WHERE ID='dc6e77c9-1aae-4755-8838-d7ead3311078'
DELETE FROM TINTERVENTIONS WHERE ID='d0308961-170f-42a2-8b3c-efad6ac7c568'
DELETE FROM TWORKORDERS WHERE ID='a11face2-d945-4a4f-ab83-7a5a5099acea'
DELETE FROM TVEHICLES WHERE ID='dc2b05d2-be83-40e0-9ce3-17a601fa3b3b'
DELETE FROM TCHARGES WHERE ID='986dcb8e-2672-48c6-9259-b219890f77bb'
DELETE FROM TVOUCHERS WHERE ID='a49c01c6-872f-4be6-a2c4-94fb6ca18165'
DELETE FROM TPAYMENTMEANS WHERE ID='a49c01c6-872f-4be6-a2c4-94fb6ca18165'
DELETE FROM TCREDITCARDS WHERE ID='ba24a3b3-6c4a-43b8-8b0d-82cb8726eea2'
DELETE FROM TPAYMENTMEANS WHERE ID='ba24a3b3-6c4a-43b8-8b0d-82cb8726eea2'
DELETE FROM TINVOICES WHERE ID='149f7d65-4d00-4790-b113-a3f4486ce63b'
DELETE FROM TVEHICLETYPES WHERE ID='2226c4b4-d12d-4b25-8e0f-703abd207522'
DELETE FROM TMECHANICS WHERE ID='a956da80-8323-4c92-a98e-350df137105f'
DELETE FROM TCASHES WHERE ID='acecf701-511a-431c-bbb4-de01c84364d3'
DELETE FROM TPAYMENTMEANS WHERE ID='acecf701-511a-431c-bbb4-de01c84364d3'
DELETE FROM TCLIENTS WHERE ID='368612ed-5258-446a-a38a-8730cc5a2143'
COMMIT
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('1dbf54bc-5148-4ff1-822c-8675be2c6720','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('052c544d-c3b3-4a34-8e3e-bad37869f65e','Cash',0.0E0,1,'1dbf54bc-5148-4ff1-822c-8675be2c6720')
INSERT INTO TMECHANICS VALUES('5cbd313d-eccc-469a-b276-98872e007efb','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('be494f07-e267-43a8-8a19-c0bb68e7d17e',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('a66c585e-ddf8-4b85-84eb-c42eb24f4f46',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('5248f8ab-47c1-49a9-ab37-1514aa548a68','CreditCard',60.5E0,1,'1dbf54bc-5148-4ff1-822c-8675be2c6720')
INSERT INTO TPAYMENTMEANS VALUES('25985df9-9652-461f-a4df-dc65d81b6042','Voucher',0.0E0,1,'1dbf54bc-5148-4ff1-822c-8675be2c6720')
INSERT INTO TCHARGES VALUES('7b741105-c2ba-4797-90f5-fb150158713d',60.5E0,1,'a66c585e-ddf8-4b85-84eb-c42eb24f4f46','5248f8ab-47c1-49a9-ab37-1514aa548a68')
INSERT INTO TVEHICLES VALUES('611f58c4-a0d8-4417-9d75-f4ea25e49d0e','seat','ibiza',1,'1234 GJI',1,'1dbf54bc-5148-4ff1-822c-8675be2c6720','be494f07-e267-43a8-8a19-c0bb68e7d17e')
INSERT INTO TWORKORDERS VALUES('0bc4c6cd-ccb1-41f2-a48e-7a256d81891a',50.0E0,'2019-10-31 10:42:59.949000','falla la junta la trocla','INVOICED',1,'a66c585e-ddf8-4b85-84eb-c42eb24f4f46',NULL,'611f58c4-a0d8-4417-9d75-f4ea25e49d0e')
INSERT INTO TINTERVENTIONS VALUES('1cac7cef-c7de-43ea-9ce2-b44e82cb6cac','2019-10-31 10:42:59.949000',60,1,'5cbd313d-eccc-469a-b276-98872e007efb','0bc4c6cd-ccb1-41f2-a48e-7a256d81891a')
INSERT INTO TSPAREPARTS VALUES('1a861513-7a02-40fb-acc0-926aeb441021','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('8a917856-0912-47cf-b0a9-aefec10aecf6',2,1,'1cac7cef-c7de-43ea-9ce2-b44e82cb6cac','1a861513-7a02-40fb-acc0-926aeb441021')
INSERT INTO TCASHES VALUES('052c544d-c3b3-4a34-8e3e-bad37869f65e')
INSERT INTO TCREDITCARDS VALUES('5248f8ab-47c1-49a9-ab37-1514aa548a68','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('25985df9-9652-461f-a4df-dc65d81b6042',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='8a917856-0912-47cf-b0a9-aefec10aecf6'
DELETE FROM TSPAREPARTS WHERE ID='1a861513-7a02-40fb-acc0-926aeb441021'
DELETE FROM TINTERVENTIONS WHERE ID='1cac7cef-c7de-43ea-9ce2-b44e82cb6cac'
DELETE FROM TWORKORDERS WHERE ID='0bc4c6cd-ccb1-41f2-a48e-7a256d81891a'
DELETE FROM TVEHICLES WHERE ID='611f58c4-a0d8-4417-9d75-f4ea25e49d0e'
DELETE FROM TCHARGES WHERE ID='7b741105-c2ba-4797-90f5-fb150158713d'
DELETE FROM TVOUCHERS WHERE ID='25985df9-9652-461f-a4df-dc65d81b6042'
DELETE FROM TPAYMENTMEANS WHERE ID='25985df9-9652-461f-a4df-dc65d81b6042'
DELETE FROM TCREDITCARDS WHERE ID='5248f8ab-47c1-49a9-ab37-1514aa548a68'
DELETE FROM TPAYMENTMEANS WHERE ID='5248f8ab-47c1-49a9-ab37-1514aa548a68'
DELETE FROM TINVOICES WHERE ID='a66c585e-ddf8-4b85-84eb-c42eb24f4f46'
DELETE FROM TVEHICLETYPES WHERE ID='be494f07-e267-43a8-8a19-c0bb68e7d17e'
DELETE FROM TMECHANICS WHERE ID='5cbd313d-eccc-469a-b276-98872e007efb'
DELETE FROM TCASHES WHERE ID='052c544d-c3b3-4a34-8e3e-bad37869f65e'
DELETE FROM TPAYMENTMEANS WHERE ID='052c544d-c3b3-4a34-8e3e-bad37869f65e'
DELETE FROM TCLIENTS WHERE ID='1dbf54bc-5148-4ff1-822c-8675be2c6720'
COMMIT
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('7b3dd972-ab9d-4aa1-b0d1-7f2e56f96774','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('c905599a-3c46-4795-8c99-880033d73aa5','Cash',0.0E0,1,'7b3dd972-ab9d-4aa1-b0d1-7f2e56f96774')
INSERT INTO TMECHANICS VALUES('d4adbcd0-00f1-469a-961e-cc21bbf4664f','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('789e3280-366d-4bfa-884d-542578923ab6',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('5431adea-8b5d-46e8-9145-805afe594cad',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('157e0b5d-2b37-406d-9357-c715893e97df','CreditCard',60.5E0,1,'7b3dd972-ab9d-4aa1-b0d1-7f2e56f96774')
INSERT INTO TPAYMENTMEANS VALUES('a9651cfe-94ce-4147-a611-c56e81ad5e90','Voucher',0.0E0,1,'7b3dd972-ab9d-4aa1-b0d1-7f2e56f96774')
INSERT INTO TCHARGES VALUES('6eb35fc8-624c-49e9-9964-23e25ef893b2',60.5E0,1,'5431adea-8b5d-46e8-9145-805afe594cad','157e0b5d-2b37-406d-9357-c715893e97df')
INSERT INTO TVEHICLES VALUES('dbf3c5f6-ffad-44bc-b385-9bbe62dc2d65','seat','ibiza',1,'1234 GJI',1,'7b3dd972-ab9d-4aa1-b0d1-7f2e56f96774','789e3280-366d-4bfa-884d-542578923ab6')
INSERT INTO TWORKORDERS VALUES('91f4390e-e972-4fe5-99ea-10949ad7379c',50.0E0,'2019-10-31 10:43:00.343000','falla la junta la trocla','INVOICED',1,'5431adea-8b5d-46e8-9145-805afe594cad',NULL,'dbf3c5f6-ffad-44bc-b385-9bbe62dc2d65')
INSERT INTO TINTERVENTIONS VALUES('a01ca82f-1c32-42bb-8cf1-925fb8009f05','2019-10-31 10:43:00.343000',60,1,'d4adbcd0-00f1-469a-961e-cc21bbf4664f','91f4390e-e972-4fe5-99ea-10949ad7379c')
INSERT INTO TSPAREPARTS VALUES('1d890a5b-0a26-4c36-8aac-a32f0fbf160e','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('a8a6cdad-63df-4f0f-9f52-f7c2fc85adfc',2,1,'a01ca82f-1c32-42bb-8cf1-925fb8009f05','1d890a5b-0a26-4c36-8aac-a32f0fbf160e')
INSERT INTO TCASHES VALUES('c905599a-3c46-4795-8c99-880033d73aa5')
INSERT INTO TCREDITCARDS VALUES('157e0b5d-2b37-406d-9357-c715893e97df','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('a9651cfe-94ce-4147-a611-c56e81ad5e90',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='a8a6cdad-63df-4f0f-9f52-f7c2fc85adfc'
DELETE FROM TSPAREPARTS WHERE ID='1d890a5b-0a26-4c36-8aac-a32f0fbf160e'
DELETE FROM TINTERVENTIONS WHERE ID='a01ca82f-1c32-42bb-8cf1-925fb8009f05'
DELETE FROM TWORKORDERS WHERE ID='91f4390e-e972-4fe5-99ea-10949ad7379c'
DELETE FROM TVEHICLES WHERE ID='dbf3c5f6-ffad-44bc-b385-9bbe62dc2d65'
DELETE FROM TCHARGES WHERE ID='6eb35fc8-624c-49e9-9964-23e25ef893b2'
DELETE FROM TVOUCHERS WHERE ID='a9651cfe-94ce-4147-a611-c56e81ad5e90'
DELETE FROM TPAYMENTMEANS WHERE ID='a9651cfe-94ce-4147-a611-c56e81ad5e90'
DELETE FROM TCREDITCARDS WHERE ID='157e0b5d-2b37-406d-9357-c715893e97df'
DELETE FROM TPAYMENTMEANS WHERE ID='157e0b5d-2b37-406d-9357-c715893e97df'
DELETE FROM TINVOICES WHERE ID='5431adea-8b5d-46e8-9145-805afe594cad'
DELETE FROM TVEHICLETYPES WHERE ID='789e3280-366d-4bfa-884d-542578923ab6'
DELETE FROM TMECHANICS WHERE ID='d4adbcd0-00f1-469a-961e-cc21bbf4664f'
DELETE FROM TCASHES WHERE ID='c905599a-3c46-4795-8c99-880033d73aa5'
DELETE FROM TPAYMENTMEANS WHERE ID='c905599a-3c46-4795-8c99-880033d73aa5'
DELETE FROM TCLIENTS WHERE ID='7b3dd972-ab9d-4aa1-b0d1-7f2e56f96774'
COMMIT
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('19e6aedd-6005-4ffe-a190-b98bd8201d6f','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('d3e26f6c-4a42-4203-adec-d1684eb7589c','Cash',0.0E0,1,'19e6aedd-6005-4ffe-a190-b98bd8201d6f')
INSERT INTO TMECHANICS VALUES('391baeb6-0d4d-40f3-ac6a-5d9e6a037650','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('b0ded929-6b96-4c7e-9b05-d631095b7f10',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('e56d433b-793b-4aba-9257-1f41bf154dbe',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('c87ba546-ad1b-4e8a-9c14-cd7f8903ed76','CreditCard',60.5E0,1,'19e6aedd-6005-4ffe-a190-b98bd8201d6f')
INSERT INTO TPAYMENTMEANS VALUES('ced329e6-b252-458b-8031-c7c96e401f7d','Voucher',0.0E0,1,'19e6aedd-6005-4ffe-a190-b98bd8201d6f')
INSERT INTO TCHARGES VALUES('e103e163-d654-4e13-bd6c-c52b3b997e47',60.5E0,1,'e56d433b-793b-4aba-9257-1f41bf154dbe','c87ba546-ad1b-4e8a-9c14-cd7f8903ed76')
INSERT INTO TVEHICLES VALUES('36b97d2e-e970-4e0b-8187-8481d11a1612','seat','ibiza',1,'1234 GJI',1,'19e6aedd-6005-4ffe-a190-b98bd8201d6f','b0ded929-6b96-4c7e-9b05-d631095b7f10')
INSERT INTO TWORKORDERS VALUES('14d063b2-5376-41ca-b398-a7ca174edce3',50.0E0,'2019-10-31 10:43:00.689000','falla la junta la trocla','INVOICED',1,'e56d433b-793b-4aba-9257-1f41bf154dbe',NULL,'36b97d2e-e970-4e0b-8187-8481d11a1612')
INSERT INTO TINTERVENTIONS VALUES('8b23c7f4-ecdb-440b-8b9b-291a8fe61ba9','2019-10-31 10:43:00.689000',60,1,'391baeb6-0d4d-40f3-ac6a-5d9e6a037650','14d063b2-5376-41ca-b398-a7ca174edce3')
INSERT INTO TSPAREPARTS VALUES('ce4dfc85-44cd-4458-be27-e850dae485e8','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('22573abe-9f77-42c2-8ef5-b30680d45d59',2,1,'8b23c7f4-ecdb-440b-8b9b-291a8fe61ba9','ce4dfc85-44cd-4458-be27-e850dae485e8')
INSERT INTO TCASHES VALUES('d3e26f6c-4a42-4203-adec-d1684eb7589c')
INSERT INTO TCREDITCARDS VALUES('c87ba546-ad1b-4e8a-9c14-cd7f8903ed76','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('ced329e6-b252-458b-8031-c7c96e401f7d',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='22573abe-9f77-42c2-8ef5-b30680d45d59'
DELETE FROM TSPAREPARTS WHERE ID='ce4dfc85-44cd-4458-be27-e850dae485e8'
DELETE FROM TINTERVENTIONS WHERE ID='8b23c7f4-ecdb-440b-8b9b-291a8fe61ba9'
DELETE FROM TWORKORDERS WHERE ID='14d063b2-5376-41ca-b398-a7ca174edce3'
DELETE FROM TVEHICLES WHERE ID='36b97d2e-e970-4e0b-8187-8481d11a1612'
DELETE FROM TCHARGES WHERE ID='e103e163-d654-4e13-bd6c-c52b3b997e47'
DELETE FROM TVOUCHERS WHERE ID='ced329e6-b252-458b-8031-c7c96e401f7d'
DELETE FROM TPAYMENTMEANS WHERE ID='ced329e6-b252-458b-8031-c7c96e401f7d'
DELETE FROM TCREDITCARDS WHERE ID='c87ba546-ad1b-4e8a-9c14-cd7f8903ed76'
DELETE FROM TPAYMENTMEANS WHERE ID='c87ba546-ad1b-4e8a-9c14-cd7f8903ed76'
DELETE FROM TINVOICES WHERE ID='e56d433b-793b-4aba-9257-1f41bf154dbe'
DELETE FROM TVEHICLETYPES WHERE ID='b0ded929-6b96-4c7e-9b05-d631095b7f10'
DELETE FROM TMECHANICS WHERE ID='391baeb6-0d4d-40f3-ac6a-5d9e6a037650'
DELETE FROM TCASHES WHERE ID='d3e26f6c-4a42-4203-adec-d1684eb7589c'
DELETE FROM TPAYMENTMEANS WHERE ID='d3e26f6c-4a42-4203-adec-d1684eb7589c'
DELETE FROM TCLIENTS WHERE ID='19e6aedd-6005-4ffe-a190-b98bd8201d6f'
COMMIT
DISCONNECT
/*C23*/SET SCHEMA PUBLIC
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID
ALTER TABLE TCERTIFICATES DROP CONSTRAINT UNQ_TCERTIFICATES_0
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT FK_TENROLLMENTS_COURSE_ID
ALTER TABLE TENROLLMENTS DROP CONSTRAINT UNQ_TENROLLMENTS_0
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_MECHANIC_ID
ALTER TABLE tInterventions DROP CONSTRAINT FK_tInterventions_WORKORDER_ID
ALTER TABLE tInterventions DROP CONSTRAINT UNQ_tInterventions_0
ALTER TABLE tPaymentMeans DROP CONSTRAINT FK_tPaymentMeans_CLIENT_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_COURSE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID
ALTER TABLE TDEDICATIONS DROP CONSTRAINT UNQ_TDEDICATIONS_0
ALTER TABLE TVouchers DROP CONSTRAINT FK_TVouchers_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_INTERVENTION_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT FK_tSubstitutions_SPAREPART_ID
ALTER TABLE tSubstitutions DROP CONSTRAINT UNQ_tSubstitutions_0
ALTER TABLE tCashes DROP CONSTRAINT FK_tCashes_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_MECHANIC_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_VEHICLE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT FK_TWORKORDERS_INVOICE_ID
ALTER TABLE TWORKORDERS DROP CONSTRAINT UNQ_TWORKORDERS_0
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_INVOICE_ID
ALTER TABLE tCharges DROP CONSTRAINT FK_tCharges_PAYMENTMEAN_ID
ALTER TABLE tCharges DROP CONSTRAINT UNQ_tCharges_0
ALTER TABLE tCreditCards DROP CONSTRAINT FK_tCreditCards_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_CLIENT_ID
ALTER TABLE tVehicles DROP CONSTRAINT FK_tVehicles_VEHICLETYPE_ID
DROP TABLE tInvoices
DROP TABLE TCERTIFICATES
DROP TABLE TENROLLMENTS
DROP TABLE tInterventions
DROP TABLE tPaymentMeans
DROP TABLE TCOURSES
DROP TABLE TSPAREPARTS
DROP TABLE TDEDICATIONS
DROP TABLE TVouchers
DROP TABLE tClients
DROP TABLE tSubstitutions
DROP TABLE tVehicleTypes
DROP TABLE tCashes
DROP TABLE TWORKORDERS
DROP TABLE tCharges
DROP TABLE tCreditCards
DROP TABLE tVehicles
DROP TABLE tMechanics
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, MINTRAININGHOURS INTEGER, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (mechanic_id, workOrder_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_2 UNIQUE (NAME)
ALTER TABLE TWORKORDERS ADD CONSTRAINT UNQ_TWORKORDERS_0 UNIQUE (VEHICLE_ID, MECHANIC_ID, INVOICE_ID)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
INSERT INTO TCLIENTS VALUES('20f0037a-b62f-4008-ad13-241473a7b7b8','dni',NULL,'nombre',NULL,'apellidos',1,'city','street','zipcode')
INSERT INTO TPAYMENTMEANS VALUES('bf976142-4019-4983-a558-5d6e558b1fc4','Cash',0.0E0,1,'20f0037a-b62f-4008-ad13-241473a7b7b8')
INSERT INTO TMECHANICS VALUES('120e6cf7-3f12-46f4-a5c1-897c7aa5194c','dni-mecanico','nombre','apellidos',1)
INSERT INTO TVEHICLETYPES VALUES('69bbb140-6165-48bd-9d86-cef66f92c750',0,'coche',50.0E0,1)
INSERT INTO TINVOICES VALUES('e0a69402-674b-4188-9c77-ca8da8dd63f3',60.5E0,'2019-10-31 00:00:00.000000',1,'NOT_YET_PAID',21.0E0,1)
INSERT INTO TPAYMENTMEANS VALUES('0d5c347f-8073-44b7-9164-9d8699050914','CreditCard',60.5E0,1,'20f0037a-b62f-4008-ad13-241473a7b7b8')
INSERT INTO TPAYMENTMEANS VALUES('9a070e46-422a-487b-96ee-f1de70c3ae1b','Voucher',0.0E0,1,'20f0037a-b62f-4008-ad13-241473a7b7b8')
INSERT INTO TCHARGES VALUES('ae0fced9-abbb-4838-b024-980aa32f1f25',60.5E0,1,'e0a69402-674b-4188-9c77-ca8da8dd63f3','0d5c347f-8073-44b7-9164-9d8699050914')
INSERT INTO TVEHICLES VALUES('08d5de6e-4728-4b2f-bbd1-b4d2bf5c1927','seat','ibiza',1,'1234 GJI',1,'20f0037a-b62f-4008-ad13-241473a7b7b8','69bbb140-6165-48bd-9d86-cef66f92c750')
INSERT INTO TWORKORDERS VALUES('e0d66f95-5602-439e-ab74-491ca0613f82',50.0E0,'2019-10-31 10:43:01.069000','falla la junta la trocla','INVOICED',1,'e0a69402-674b-4188-9c77-ca8da8dd63f3',NULL,'08d5de6e-4728-4b2f-bbd1-b4d2bf5c1927')
INSERT INTO TINTERVENTIONS VALUES('52cc9ada-e0ac-49d1-a493-0811eb90c62d','2019-10-31 10:43:01.069000',60,1,'120e6cf7-3f12-46f4-a5c1-897c7aa5194c','e0d66f95-5602-439e-ab74-491ca0613f82')
INSERT INTO TSPAREPARTS VALUES('f59e65db-5f91-4671-b008-f82945abe137','R1001','junta la trocla',100.0E0,1)
INSERT INTO TSUBSTITUTIONS VALUES('c766825b-3f00-45ff-b319-6eb87de963d7',2,1,'52cc9ada-e0ac-49d1-a493-0811eb90c62d','f59e65db-5f91-4671-b008-f82945abe137')
INSERT INTO TCASHES VALUES('bf976142-4019-4983-a558-5d6e558b1fc4')
INSERT INTO TCREDITCARDS VALUES('0d5c347f-8073-44b7-9164-9d8699050914','1234567','visa','2020-10-30 00:00:00.000000')
INSERT INTO TVOUCHERS VALUES('9a070e46-422a-487b-96ee-f1de70c3ae1b',100.0E0,'B-100','Voucher just for testing')
COMMIT
DELETE FROM TSUBSTITUTIONS WHERE ID='c766825b-3f00-45ff-b319-6eb87de963d7'
DELETE FROM TSPAREPARTS WHERE ID='f59e65db-5f91-4671-b008-f82945abe137'
DELETE FROM TINTERVENTIONS WHERE ID='52cc9ada-e0ac-49d1-a493-0811eb90c62d'
DELETE FROM TWORKORDERS WHERE ID='e0d66f95-5602-439e-ab74-491ca0613f82'
DELETE FROM TVEHICLES WHERE ID='08d5de6e-4728-4b2f-bbd1-b4d2bf5c1927'
DELETE FROM TCHARGES WHERE ID='ae0fced9-abbb-4838-b024-980aa32f1f25'
DELETE FROM TVOUCHERS WHERE ID='9a070e46-422a-487b-96ee-f1de70c3ae1b'
DELETE FROM TPAYMENTMEANS WHERE ID='9a070e46-422a-487b-96ee-f1de70c3ae1b'
DELETE FROM TCREDITCARDS WHERE ID='0d5c347f-8073-44b7-9164-9d8699050914'
DELETE FROM TPAYMENTMEANS WHERE ID='0d5c347f-8073-44b7-9164-9d8699050914'
DELETE FROM TINVOICES WHERE ID='e0a69402-674b-4188-9c77-ca8da8dd63f3'
DELETE FROM TVEHICLETYPES WHERE ID='69bbb140-6165-48bd-9d86-cef66f92c750'
DELETE FROM TMECHANICS WHERE ID='120e6cf7-3f12-46f4-a5c1-897c7aa5194c'
DELETE FROM TCASHES WHERE ID='bf976142-4019-4983-a558-5d6e558b1fc4'
DELETE FROM TPAYMENTMEANS WHERE ID='bf976142-4019-4983-a558-5d6e558b1fc4'
DELETE FROM TCLIENTS WHERE ID='20f0037a-b62f-4008-ad13-241473a7b7b8'
COMMIT
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
DISCONNECT
