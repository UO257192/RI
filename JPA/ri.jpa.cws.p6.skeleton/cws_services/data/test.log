/*C3*/SET SCHEMA PUBLIC
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
CREATE TABLE tInvoices (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, NUMBER BIGINT NOT NULL, STATUS VARCHAR(255), VAT REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TCERTIFICATES (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, VERSION BIGINT, MECHANIC_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TENROLLMENTS (ID VARCHAR(255) NOT NULL, ATTENDANCE INTEGER, PASSED BOOLEAN, VERSION BIGINT, COURSE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tInterventions (ID VARCHAR(255) NOT NULL, DATE TIMESTAMP, MINUTES INTEGER, VERSION BIGINT, MECHANIC_ID VARCHAR(255), WORKORDER_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tPaymentMeans (ID VARCHAR(255) NOT NULL, DTYPE VARCHAR(31), ACCUMULATED REAL, VERSION BIGINT, CLIENT_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TCOURSES (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), ENDDATE TIMESTAMP, HOURS INTEGER, NAME VARCHAR(255), STARTDATE TIMESTAMP, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TSPAREPARTS (ID VARCHAR(255) NOT NULL, CODE VARCHAR(255) NOT NULL, DESCRIPTION VARCHAR(255), PRICE REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE TDEDICATIONS (ID VARCHAR(255) NOT NULL, PERCENTAGE INTEGER, VERSION BIGINT, COURSE_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE TVouchers (ID VARCHAR(255) NOT NULL, AVAILABLE REAL, CODE VARCHAR(255), DESCRIPTION VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tClients (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, EMAIL VARCHAR(255), NAME VARCHAR(255), PHONE VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, CITY VARCHAR(255), STREET VARCHAR(255), ZIPCODE VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tSubstitutions (ID VARCHAR(255) NOT NULL, QUANTITY INTEGER, VERSION BIGINT, INTERVENTION_ID VARCHAR(255), SPAREPART_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tVehicleTypes (ID VARCHAR(255) NOT NULL, NAME VARCHAR(255) NOT NULL, PRICEPERHOUR REAL, VERSION BIGINT, PRIMARY KEY (ID))
CREATE TABLE tCashes (ID VARCHAR(255) NOT NULL, PRIMARY KEY (ID))
CREATE TABLE TWORKORDERS (ID VARCHAR(255) NOT NULL, AMOUNT REAL, DATE TIMESTAMP, DESCRIPTION VARCHAR(255), STATUS VARCHAR(255), VERSION BIGINT, INVOICE_ID VARCHAR(255), MECHANIC_ID VARCHAR(255), VEHICLE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCharges (ID VARCHAR(255) NOT NULL, AMOUNT REAL, VERSION BIGINT, INVOICE_ID VARCHAR(255), PAYMENTMEAN_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tCreditCards (ID VARCHAR(255) NOT NULL, NUMBER VARCHAR(255) NOT NULL, TYPE VARCHAR(255), VALIDTHRU TIMESTAMP, PRIMARY KEY (ID))
CREATE TABLE tVehicles (ID VARCHAR(255) NOT NULL, MAKE VARCHAR(255), MODEL VARCHAR(255), NUM_WORKORDERS INTEGER, PLATENUMBER VARCHAR(255) NOT NULL, VERSION BIGINT, CLIENT_ID VARCHAR(255), VEHICLETYPE_ID VARCHAR(255), PRIMARY KEY (ID))
CREATE TABLE tMechanics (ID VARCHAR(255) NOT NULL, DNI VARCHAR(255) NOT NULL, NAME VARCHAR(255), SURNAME VARCHAR(255), VERSION BIGINT, PRIMARY KEY (ID))
ALTER TABLE tInvoices ADD CONSTRAINT UNQ_tInvoices_3 UNIQUE (NUMBER)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT UNQ_TCERTIFICATES_0 UNIQUE (MECHANIC_ID, VEHICLETYPE_ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT UNQ_TENROLLMENTS_0 UNIQUE (MECHANIC_ID, COURSE_ID)
ALTER TABLE tInterventions ADD CONSTRAINT UNQ_tInterventions_0 UNIQUE (workOrder_id, mechanic_id)
ALTER TABLE TCOURSES ADD CONSTRAINT UNQ_TCOURSES_1 UNIQUE (CODE)
ALTER TABLE TSPAREPARTS ADD CONSTRAINT UNQ_TSPAREPARTS_1 UNIQUE (CODE)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT UNQ_TDEDICATIONS_0 UNIQUE (VEHICLETYPE_ID, COURSE_ID)
ALTER TABLE TVouchers ADD CONSTRAINT UNQ_TVouchers_2 UNIQUE (CODE)
ALTER TABLE tClients ADD CONSTRAINT UNQ_tClients_1 UNIQUE (DNI)
ALTER TABLE tSubstitutions ADD CONSTRAINT UNQ_tSubstitutions_0 UNIQUE (SPAREPART_ID, INTERVENTION_ID)
ALTER TABLE tVehicleTypes ADD CONSTRAINT UNQ_tVehicleTypes_1 UNIQUE (NAME)
ALTER TABLE tCharges ADD CONSTRAINT UNQ_tCharges_0 UNIQUE (invoice_id, paymentMean_id)
ALTER TABLE tCreditCards ADD CONSTRAINT UNQ_tCreditCards_1 UNIQUE (NUMBER)
ALTER TABLE tVehicles ADD CONSTRAINT UNQ_tVehicles_4 UNIQUE (PLATENUMBER)
ALTER TABLE tMechanics ADD CONSTRAINT UNQ_tMechanics_1 UNIQUE (DNI)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TCERTIFICATES ADD CONSTRAINT FK_TCERTIFICATES_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TENROLLMENTS ADD CONSTRAINT FK_TENROLLMENTS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE tInterventions ADD CONSTRAINT FK_tInterventions_WORKORDER_ID FOREIGN KEY (WORKORDER_ID) REFERENCES TWORKORDERS (ID)
ALTER TABLE tPaymentMeans ADD CONSTRAINT FK_tPaymentMeans_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_COURSE_ID FOREIGN KEY (COURSE_ID) REFERENCES TCOURSES (ID)
ALTER TABLE TDEDICATIONS ADD CONSTRAINT FK_TDEDICATIONS_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
ALTER TABLE TVouchers ADD CONSTRAINT FK_TVouchers_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_INTERVENTION_ID FOREIGN KEY (INTERVENTION_ID) REFERENCES tInterventions (ID)
ALTER TABLE tSubstitutions ADD CONSTRAINT FK_tSubstitutions_SPAREPART_ID FOREIGN KEY (SPAREPART_ID) REFERENCES TSPAREPARTS (ID)
ALTER TABLE tCashes ADD CONSTRAINT FK_tCashes_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_MECHANIC_ID FOREIGN KEY (MECHANIC_ID) REFERENCES tMechanics (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_VEHICLE_ID FOREIGN KEY (VEHICLE_ID) REFERENCES tVehicles (ID)
ALTER TABLE TWORKORDERS ADD CONSTRAINT FK_TWORKORDERS_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_INVOICE_ID FOREIGN KEY (INVOICE_ID) REFERENCES tInvoices (ID)
ALTER TABLE tCharges ADD CONSTRAINT FK_tCharges_PAYMENTMEAN_ID FOREIGN KEY (PAYMENTMEAN_ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tCreditCards ADD CONSTRAINT FK_tCreditCards_ID FOREIGN KEY (ID) REFERENCES tPaymentMeans (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_CLIENT_ID FOREIGN KEY (CLIENT_ID) REFERENCES tClients (ID)
ALTER TABLE tVehicles ADD CONSTRAINT FK_tVehicles_VEHICLETYPE_ID FOREIGN KEY (VEHICLETYPE_ID) REFERENCES tVehicleTypes (ID)
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
DISCONNECT
